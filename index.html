<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Calculator</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="calculator">
    <div class="display" id="display">0</div>
    <div class="buttons">
      <button onclick="clearDisplay()">AC</button>
      <button onclick="backspace()">⌫</button>
      <button onclick="calculateSquare()">x²</button>
      <button onclick="calculateCube()">x³</button>

      <button onclick="appendNumber('7')">7</button>
      <button onclick="appendNumber('8')">8</button>
      <button onclick="appendNumber('9')">9</button>
      <button onclick="chooseOperation('/')">÷</button>

      <button onclick="appendNumber('4')">4</button>
      <button onclick="appendNumber('5')">5</button>
      <button onclick="appendNumber('6')">6</button>
      <button onclick="chooseOperation('*')">×</button>

      <button onclick="appendNumber('1')">1</button>
      <button onclick="appendNumber('2')">2</button>
      <button onclick="appendNumber('3')">3</button>
      <button onclick="chooseOperation('-')">−</button>

      <button onclick="appendNumber('0')">0</button>
      <button onclick="chooseOperation('%')">%</button>
      <button onclick="chooseOperation('+')">+</button>
      <button onclick="compute()">=</button>

      <button onclick="calculateFactorial()">n!</button>
      <button onclick="checkEven()">Even?</button>
      <button onclick="checkOdd()">Odd?</button>
    </div>
  </div>

  <script>
    let display = document.getElementById("display");
    let currentInput = "";
    let operator = "";
    let firstOperand = "";

    function appendNumber(num) {
      currentInput += num;
      display.innerText = currentInput;
    }

    function clearDisplay() {
      currentInput = "";
      operator = "";
      firstOperand = "";
      display.innerText = "0";
    }

    function backspace() {
      currentInput = currentInput.slice(0, -1);
      display.innerText = currentInput || "0";
    }

    function chooseOperation(op) {
      if (currentInput === "") return;
      firstOperand = currentInput;
      operator = op;
      currentInput = "";
    }

    function compute() {
      if (currentInput === "" || firstOperand === "") return;
      let result;
      let num1 = parseFloat(firstOperand);
      let num2 = parseFloat(currentInput);
      switch (operator) {
        case "+": result = num1 + num2; break;
        case "-": result = num1 - num2; break;
        case "*": result = num1 * num2; break;
        case "/": result = num1 / num2; break;
        case "%": result = num1 % num2; break;
        default: return;
      }
      display.innerText = result;
      console.log(`Result: ${result}`);
      currentInput = result.toString();
      operator = "";
      firstOperand = "";
    }

    function calculateSquare() {
      if (currentInput === "") return;
      let num = parseFloat(currentInput);
      let result = num * num;
      display.innerText = result;
      console.log(`Square: ${result}`);
      currentInput = result.toString();
    }

    function calculateCube() {
      if (currentInput === "") return;
      let num = parseFloat(currentInput);
      let result = num * num * num;
      display.innerText = result;
      console.log(`Cube: ${result}`);
      currentInput = result.toString();
    }

    function calculateFactorial() {
      if (currentInput === "") return;
      let num = parseInt(currentInput);
      function fact(n) {
        return n <= 1 ? 1 : n * fact(n - 1);
      }
      let result = fact(num);
      display.innerText = result;
      console.log(`Factorial: ${result}`);
      currentInput = result.toString();
    }

    function checkEven() {
      if (currentInput === "") return;
      let num = parseInt(currentInput);
      let result = num % 2 === 0 ? "Even" : "Not Even";
      display.innerText = result;
      console.log(result);
    }

    function checkOdd() {
      if (currentInput === "") return;
      let num = parseInt(currentInput);
      let result = num % 2 !== 0 ? "Odd" : "Not Odd";
      display.innerText = result;
      console.log(result);
    }
  </script>
</body>
</html>
